# Daily Log

## 2026-02-06

- Initialized repo and Vite React TypeScript scaffold.
- Added project structure per spec: features/views/ui/docs/tests/workflows.
- Implemented deadline parsing with timezone validation, DST ambiguity handling, and UTC canonicalization.
- Implemented solar/civil algorithms: equation-of-time toggle, solar meridian, terminator polyline, night polygon, civil offset bands, distance math.
- Implemented landmark crossing solver using bisection over continuous solar phase.
- Built UI: command panel, countdown, stats, distance box, settings drawer, toasts, 2D map, lazy 3D globe.
- Added offline datasets and PWA caching for app shell/data.
- Added unit/property/e2e tests and CI/deploy workflows.
- Added optional timezone polygon accuracy mode with drop-in dataset path (`public/data/timezones/timezones.geojson`) and fallback to offset bands.
- Upgraded timezone UX to reliable searchable select and added AoE (`Etc/GMT+12`) alias support.
- Replaced custom 3D prototype renderer with `react-globe.gl` implementation including drag/zoom orbit controls and sun-driven lighting.
- Added 2D map drag/zoom/reset interactions and improved button styling/motion treatments.
- Reworked command panel controls to embedded input icons (no overlap-prone external pick buttons).
- Added no-checkbox control system with Radix switches + segmented time view.
- Added now-line + deadline-line visualization in both 2d and 3d.
- Implemented infinite horizontal map wrap rendering and visible reset snap-back behavior.
- Added near-deadline FX stages using `tsparticles` and reduced-motion toggle support.
- Added debug mode (`?debug=1` / `Ctrl+Shift+D`) with layout overlays, overlap/hit-target checks, screenshot + layout JSON capture.
- Added UI capture automation script `npm run ui:capture` producing artifacts for desktop/mobile.
- Validation completed: lint, vitest suite, production build, playwright e2e pass.
- Added strict quality standards:
  - Prettier config + format check/write commands.
  - stronger TypeScript strictness flags (`noUncheckedIndexedAccess`, `noImplicitReturns`, etc.).
  - stricter type-aware ESLint rules.
  - performance report script with enforced thresholds + JSON artifact output.
- Added `prek`-based hook automation (`.pre-commit-config.yaml`) for pre-commit and pre-push gates.
- Added docs pages for UI guide, testing/quality gates, versioning, and changelog.
- Bumped project version to `0.2.0`.
- Refactored layout to keep maps wide and reduce page height stretch.
- Repositioned countdown/stats/distance/settings around map stage (under the map) for faster scanability.
- Fixed 3D rotation lock by removing periodic camera recenter and adding `reset orbit`.
- Added deployment runbook doc (`docs/deploy.md`) and synchronized docs index/reference links.
- Added e2e assertion for manual 3D orbit behavior and maintained debug-layout `warnings: 0`.
- Bumped project version to `0.2.1`.
- Implemented safe multi-deadline slots with lock + draft/apply/discard workflow and keyboard shortcuts.
- Added active-deadline status banner above map stage to make tracked deadline state explicit.
- Hardened alert threshold crossing logic and removed per-tick alert reset behavior.
- Added GH-pages subpath hardening:
  - env-driven Vite base (`GITHUB_PAGES`, `GITHUB_PAGES_REPO`)
  - dedicated GH-pages preview server script
  - Playwright GH-pages smoke suite (`tests/e2e/gh-pages.spec.ts`)
  - CI `gh-pages-smoke` job
- Added documentation pages for GH-pages path rules and render-loop timing architecture.
- Re-tuned render cadence:
  - 2D heavy astro layers sampled slower while solar line stays smooth
  - globe screen overlays moved to adaptive rAF updates
- Ran full validation suite including hooks and GH-pages smoke.
- Bumped project version to `0.3.0`.
- Added deterministic demo mode (`?demo=1`) with fixed AoE baseline and frozen now-time for reproducible screenshots.
- Reworked command panel deadline UX:
  - stronger active target banner
  - slot rename + guarded delete flow
  - apply/discard only shown for dirty draft
  - workflow auto-collapse once complete
- Hardened detail map lifecycle so interaction handlers initialize on style readiness and do not wait for full tile completion.
- Added/validated cursor-anchored zoom checks for 2D and detail views in Playwright.
- Added deterministic docs screenshot pipeline into `docs/screens` and CI screenshot drift gate (`screens:check`).
- Added button-level control rationale doc (`docs/ui-controls.md`).
- Ran validation:
  - `npm run lint`
  - `npm run typecheck`
  - `npm run test`
  - `npm run test:e2e`
  - `npm run test:e2e:gh-pages`
  - `npm run ui:capture`
- Bumped project version to `0.3.1`.
